<CONTENT VERSION="1.0" LANG="fr" CHARSET="utf-8"/>

/**
 * Main article.
 */
<DEFMACRO NAME="CKL_A_MAIN">
  <LOOP NAME="ckl_a_main"
        TABLE="textes"
        WHERE="id=[#ID_ARTICLE]">
    <DO>
      <MACRO NAME="CKL_A_HEADER"/>
    </DO>
    <ALTERNATIVE>
      <p>Article [#ID_ARTICLE] not found.</p>
    </ALTERNATIVE>
  </LOOP>
</DEFMACRO>

/**
 * Header.
 */
<DEFMACRO NAME="CKL_A_HEADER">
  ID [#ID]
  <!--[ NumÃ©ro de document ]-->
  <IF COND="[#NUMERODOCUMENT] AND [#NUMERODOCUMENT] NE '0'">
    <FUNC NAME="CKL_FIELD_STRING" FIELD="numerodocument" VALUE="[#NUMERODOCUMENT]"/>
  </IF>

  <!--[ Titre du document ]-->
  <FUNC NAME="CKL_FIELD_STRING" FIELD="titre" VALUE="[#TITRE]"/>

  <!--[ Sous-titre du document ]-->
  <FUNC NAME="CKL_FIELD_STRING" FIELD="soustitre" VALUE="[#SOUSTITRE]"/>

  <!--[ Titres alternatifs ]-->
  <IF COND="[#ALTERTITRE]">
    <FUNC NAME="CKL_ALTERTITRES" ALTERTITRE="[#ALTERTITRE]"/>
  </IF>

  <!--[ Auteurs ]-->
  <FUNC NAME="CKL_PERSONNES" TYPE="auteur"/>

  <!--[ Traducteurs ]-->
  <FUNC NAME="CKL_PERSONNES" TYPE="traducteur"/>

  <!--[ Pagination ]-->
  <FUNC NAME="CKL_FIELD_STRING" FIELD="pagination" VALUE="[#PAGINATION]"/>

  <!--[ TODO: Alias de traduction ]-->

  <!-- [ BM ] -->
  <IF COND="[#TYPE] EQ 'article' AND [#DATEPUBLI] GT today()">
		<LET VAR="BM">1</LET>
	</IF>
  <FUNC NAME="CKL_FIELD_BOOL" FIELD="bm" VALUE="[#BM]"/>
</DEFMACRO>
